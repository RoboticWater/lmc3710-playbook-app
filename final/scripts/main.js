"use strict";function nextQuestion(){var e=getNext();"end"===e&&goResponses(),$(".alt-prog .bar div").css({width:order.length/61*100+"%"}),$("#bar-"+current).addClass("done"),$.each(getIntermediateQuestions(current,e),function(e,t){$("#bar-"+t).addClass("done")}),goToQuestion(e),order.includes(current)||order.push(current)}function prevQuestion(){"q1"===current?goHome():goToQuestion(getPrev(current))}function goHome(){$(".intro").removeClass("done"),$(".content").removeClass("done")}function goResults(){$(".intro").addClass("done"),$(".content").addClass("done"),addData(current,$("input[name=response]:checked").attr("data-response")),setData()}function goToQuestion(e){void 0===resultData[e]?$("#next").prop("disabled",!0):$("#next").prop("disabled",!1),$(".intro").addClass("done"),$(".content").removeClass("done"),$(".questions").append(buildQuestion(e)),$("input[type=radio][name=response]").change(function(){addData(current,$("input[name=response]:checked").attr("data-response")),$("#next").prop("disabled",!1)}),qSlider?(addData(current,$("input[name=response]:checked").attr("data-response")),generateSideChart(),$("#"+current).fadeOut(fadeSpeed,function(){$(this).remove(),$("#"+e).fadeIn(fadeSpeed)})):$("#"+e).fadeIn(fadeSpeed),$("#"+questions[current].subplay).removeClass("current"),questions[current].group!==questions[e].group&&$("#"+questions[current].group).addClass("done"),questions[current].subplay!==questions[e].subplay&&$("#"+questions[current].subplay).addClass("done"),current=e,$("#"+questions[current].subplay).addClass("current"),$("#"+questions[current].subplay).addClass("active"),$("#"+questions[current].group).addClass("active"),qSlider=$("#"+current+"-radio")}function getNext(){return $("input[name=response]:checked").val()}function getPrev(e){return order[order.indexOf(e)-1]}function buildQuestion(e){for(var t=questions[e],a='<article class="question row current" id="'+e+'"><h1>'+t.name+"</h1><p>"+t.description+'</p><form class="radio-buttons" id="'+e+'-radio">',r=0;r<t.labels.length;r++){a+='<div><input type="radio"'+(parseInt(resultData[e])===t.values[r]?'checked="checked"':"")+'name="response" data-response="'+t.values[r]+'" id="option'+r+'" value="'+t.next[r]+'"><label for="option'+r+'">'+t.labels[r]+"</label></div>"}return a+="</form></article>"}function setData(){ctx=document.getElementById("myChart").getContext("2d");var e=[],t=[0,0,0,0];jQuery.each(resultData,function(a,r){e.push(r),void 0!=r&&("bring-people-in"==questions[a].subplay?t[0]=Number(t[0])+Number(r):"know-your-community"==questions[a].subplay?t[1]=Number(t[1])+Number(r):"focus-on-issues"==questions[a].subplay?t[2]=Number(t[2])+Number(r):"talk-it-up"==questions[a].subplay&&(t[3]=Number(t[3])+Number(r)))}),t[0]=Math.ceil(Number(t[0])/44*100),t[1]=Math.ceil(Number(t[1])/52*100),t[2]=Math.ceil(Number(t[2])/80*100),t[3]=Math.ceil(Number(t[3])/68*100),data1={labels:["Bring People In","Know your Community","Focus on Issues","Talk it Up"],datasets:[{label:"Results data",backgroundColor:"rgba(179,181,198,0.2)",borderColor:"rgba(179,181,198,1)",pointBackgroundColor:"rgba(179,181,198,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(179,181,198,1)",data:t}]},myChart=new Chart(ctx,{type:"radar",data:data1,options:{scale:{ticks:{display:!1,beginAtZero:!0,max:100}}}})}function generateSideChart(){ctx=document.getElementById("sideChart").getContext("2d");var e=[],t=[0,0,0,0];jQuery.each(resultData,function(a,r){e.push(r),void 0!=r&&("bring-people-in"==questions[a].subplay?t[0]=Number(t[0])+Number(r):"know-your-community"==questions[a].subplay?t[1]=Number(t[1])+Number(r):"focus-on-issues"==questions[a].subplay?t[2]=Number(t[2])+Number(r):"talk-it-up"==questions[a].subplay&&(t[3]=Number(t[3])+Number(r)))}),t[0]=Math.ceil(Number(t[0])/44*100),t[1]=Math.ceil(Number(t[1])/52*100),t[2]=Math.ceil(Number(t[2])/80*100),t[3]=Math.ceil(Number(t[3])/68*100),data1={labels:["1","2","3","4"],datasets:[{label:"Results data",backgroundColor:"rgba(179,181,198,0.2)",borderColor:"rgba(179,181,198,1)",pointBackgroundColor:"rgba(179,181,198,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(179,181,198,1)",data:t}]},myChart=new Chart(ctx,{type:"radar",data:data1,options:{scale:{ticks:{display:!1,beginAtZero:!0,max:100}}}})}function getIntermediateQuestions(e,t){var a=!1,r=[];return $.each(questions,function(s,n){if(s===t)return!1;a&&r.push(s),s===e&&(a=!0)}),r}function addData(e,t){resultData[e]=parseInt(t),groupData={},playData={},$.each(resultData,function(e,t){groupData[questions[e].group]?groupData[questions[e].group]+=t:groupData[questions[e].group]=t,playData[questions[e].subplay]?playData[questions[e].subplay]+=t:playData[questions[e].subplay]=t}),$("#qualititave").empty(),$.each(groupData,function(e,t){$("#"+e+"-prog div").css({width:t/totals.group[e]*100+"%"})}),$.each(playData,function(e,t){t/totals.subplay[e]<.3?$("#qualititave").append(alerts[e][0]):t/totals.subplay[e]<.6?$("#qualititave").append(alerts[e][1]):$("#qualititave").append(alerts[e][2])})}var order=["q1"],current="q1",questions,totals,resultData={},groupData={},playData={},fadeSpeed=250,qSlider;$(function(){$.getJSON("/questions.json",function(e){questions=e,$.each(questions,function(e,t){$("#"+t.group+" .parts").append('<div class="spacer"><div class="bar" id="bar-'+e+'"></div></div>')})}).fail(function(e,t,a){}),$.getJSON("/totals.json",function(e){totals=e}).fail(function(e,t,a){}),$("#start-button").on("click",function(){goToQuestion("q1")}),$("#next").on("click",function(){nextQuestion()}),$("#prev").on("click",function(){prevQuestion()}),generateSideChart()});var data1,ctx,myChart,alerts={"bring-people-in":['<div class="alert alert-danger">Socially Unfocused</div>','<div class="alert alert-success">Socially Focused</div>','<div class="alert alert-success">Very Socially Focused</div>'],"know-your-community":['<div class="alert alert-danger">Weak Presence</div>','<div class="alert alert-warning">Fairly Strong Presence</div>',,'<div class="alert alert-success">Strong Presence</div>'],"focus-on-issues":['<div class="alert alert-warning">Specialized</div>','<div class="alert alert-success">Balanced</div>','<div class="alert alert-success">Far Reaching</div>'],"talk-it-up":['<div class="alert alert-danger">Poor Communication</div>','<div class="alert alert-warning">Good Communicaiton</div>','<div class="alert alert-success">Great Communicaiton</div>']};